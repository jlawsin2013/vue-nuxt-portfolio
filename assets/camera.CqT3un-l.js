import{r as f,f as B,g as D,m as E,h as R,i as N,j as M,k as U,l as j,u as L,b as o,n as T,q,o as C,s as w,w as t,a as P,v as r,d as y,x as b}from"./entry.bQHXzxoY.js";import{V as x}from"./VContainer.fY8RBHoi.js";import{V as d,a as m}from"./VRow.pQ8y_W8K.js";import{m as z,a as A,b as F,c as H,d as O,e as W,u as G,f as J,g as K,h as Q,i as X,j as Y,V}from"./VBtn.G7WhWvso.js";import{u as Z}from"./VIcon.wHS4FbDm.js";import{V as $}from"./VImg.QrwulYHM.js";const ee=()=>{const e=f(null),a=f(null),l=f(null),n=f(""),u=f([]),c=s=>{console.error(s)},i=()=>{!e.value||!a.value||!l.value||(l.value.drawImage(e.value,0,0,a.value.width,a.value.height),v(l.value),requestAnimationFrame(i))},v=s=>{a.value&&(s.beginPath(),s.rect(50,20,a.value.width-50*2,a.value.height-20*2),s.strokeStyle="green",s.lineWidth=5,s.stroke())},h=async()=>{await navigator.mediaDevices.enumerateDevices().then(s=>{s.forEach(p=>{p.kind==="videoinput"&&u.value.push(p)})})},g=async()=>{await navigator.mediaDevices.getUserMedia({audio:!1,video:{deviceId:u.value[0].deviceId,facingMode:{exact:"user"},width:{min:1280,max:3840,ideal:1920},height:{min:720,max:2160,ideal:1080},frameRate:{min:15,max:60,ideal:30}}}).then(s=>{e.value&&(e.value.srcObject=s,e.value.play(),requestAnimationFrame(i))}).catch(c)},k=()=>{!e.value||!a.value||!l.value||(l.value.drawImage(e.value,0,0,a.value.width,a.value.height),a.value.toBlob(s=>{if(!s){console.error("Error creating blob");return}const p=URL.createObjectURL(s);n.value=p},"image/png"))},_=()=>{n.value=""},S=B(()=>a.value?{href:a.value.toDataURL("image/png"),fileName:"personal.png"}:{href:"",fileName:""});return{canvas:a,video:e,img:n,deleteImg:_,takePhoto:k,download:S,openCamera:()=>{if(!navigator.mediaDevices){console.log("Media Capture and Stream API is not supported on this browser");return}a.value&&(a.value.width=document.getElementById("canvasEl").offsetWidth,a.value.height=document.getElementById("canvasEl").offsetHeight,l.value=a.value.getContext("2d"),h().then(g).catch(c))}}},ae={"electric-pole-no":{src:"/assets/images/hiragana.png"}},te=D({color:String,...z(),...E(),...A(),...F(),...H(),...O(),...W(),...R(),...N()},"VSheet"),I=M()({name:"VSheet",props:te(),setup(e,a){let{slots:l}=a;const{themeClasses:n}=U(e),{backgroundColorClasses:u,backgroundColorStyles:c}=Z(j(e,"color")),{borderClasses:i}=G(e),{dimensionStyles:v}=J(e),{elevationClasses:h}=K(e),{locationStyles:g}=Q(e),{positionClasses:k}=X(e),{roundedClasses:_}=Y(e);return L(()=>o(e.tag,{class:["v-sheet",n.value,u.value,i.value,h.value,k.value,_.value,e.class],style:[c.value,v.value,g.value,e.style]},l)),{}}}),ce=T({__name:"camera",setup(e){const{video:a,canvas:l,img:n,takePhoto:u,deleteImg:c,download:i,openCamera:v}=ee();return q(()=>{console.log(ae["electric-pole-no"].src),v()}),(h,g)=>(C(),w(x,{fluid:""},{default:t(()=>[o(x,{class:"d-flex flex-column justify-center align-center"},{default:t(()=>[o(d,null,{default:t(()=>[o(m,null,{default:t(()=>[P("video",{ref_key:"video",ref:a,id:"video",autoplay:"",playsinline:"",muted:"",hidden:""},null,512)]),_:1})]),_:1}),o(d,{id:"canvasEl"},{default:t(()=>[o(m,null,{default:t(()=>[P("canvas",{ref_key:"canvas",ref:l,id:"canvas",class:"bg-color-dark"},null,512)]),_:1})]),_:1}),o(d,null,{default:t(()=>[o(m,{cols:"12"},{default:t(()=>[o(V,{variant:"plain",size:"small",onClick:r(u),"prepend-icon":"mdi mdi-camera-outline"},{default:t(()=>[y("Take Photo")]),_:1},8,["onClick"])]),_:1})]),_:1}),o(d,null,{default:t(()=>[o(m,{cols:"3"},{default:t(()=>[o(I,{class:"pa-5",color:"grey-lighten-3"},{default:t(()=>[o(I,{class:"mx-auto",height:"100",width:"100"},{default:t(()=>[o($,{class:"bg-black",height:"100",width:"100",src:r(n)},null,8,["src"])]),_:1})]),_:1})]),_:1})]),_:1}),r(n)?(C(),w(d,{key:0},{default:t(()=>[o(m,{cols:"12"},{default:t(()=>[o(V,{variant:"plain",size:"small","prepend-icon":"mdi-file-image-remove",onClick:r(c)},{default:t(()=>[y("Delete Image")]),_:1},8,["onClick"])]),_:1})]),_:1})):b("",!0),r(n)?(C(),w(d,{key:1},{default:t(()=>[o(m,{cols:"12"},{default:t(()=>[o(V,{href:r(i).href,size:"small",variant:"plain",download:r(i).fileName,"prepend-icon":"mdi-download-circle-outline"},{default:t(()=>[y("Download Image")]),_:1},8,["href","download"])]),_:1})]),_:1})):b("",!0)]),_:1})]),_:1}))}});export{ce as default};
